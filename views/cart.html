<!--
    File: cart.html
    Author: Vlad, Blake, Tilak
    Description: Cart page of the website.
-->

<include href="views/header.html"></include>

<body class="cartbody">
<header class="container-fluid">
    <div class="container-fluid">
        <nav class="navbar navbar-expand-lg bg-light">
            <div class="container-fluid">
                <a class="navbar-brand" href="home">CTRLFreaks</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <div class="d-flex justify-content-between w-100">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link active" aria-current="page" href="home">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="menu">Menu</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="contact">Contact</a>
                            </li>
                        </ul>
                        <div class="order-cart-container d-flex flex-row float-right align-items-center">
                            <div class="order-button d-flex align-items-center justify-content-center">
                                <a class="nav-link" href="menu">Order</a>
                            </div>
                            <a href="user"><img src="images/iconmonstr-user-19-240.png" alt="user icon"></a>
                            <a href="cart"><img src="images/iconmonstr-shopping-cart-22-240.png" alt="cart icon"></a>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </div>
</header>

<div class="container-fluid main-cart-container d-flex justify-content-center row align-items-center justify-content-center p-5">
    <div class="cart-details-container d-flex flex-column col-md-6">
        <h1>Review Order</h1>
        <div class="cart-items">
            <!-- Loop through cart items -->
            <repeat group="{{ @cartItems }}" value="{{ @item }}">
                <div class="cart-item d-flex justify-content-between align-items-center p-3 mb-3 border rounded">
                    <div>
                        <h3 class="mb-0">{{ @item.title }}</h3>
                        <p class="text-muted mb-0">Price: ${{ @item.price }}</p>
                    </div>
                    <!-- Remove Item Button -->
                    <a href="removeItem/{{ @item.itemId }}" class="btn btn-danger">Remove</a>
                </div>
            </repeat>
        </div>
        <!-- Clear Cart Button -->

        <check if="{{ !empty(@cartItems) }}">
            <a href="clearCart" class="btn btn-danger">Clear Cart</a>

        </check>
        <check if="{{ empty(@cartItems) }}">
            <div class="alert alert-info text-center">
                <p class="mb-2">No items in the cart!</p>
                <a href="menu" class="btn btn-info">Go to Menu</a>
            </div>
        </check>
    </div>
    <div class="checkout-container d-flex flex-column col-md-6 justify-content-around">
        <div class="order-location">
            <p class="fw-bold">ORDER FROM:</p>
            <p>CTRL Freaks - Seattle</p>
            <p>8281 Ave Lane Seattle, WA 48142</p>
        </div>
        <div class="discount-container mt-3">
            <p class="fw-bold">DISCOUNT</p>
            <div class="input-group">
                <input type="text" id="discount" name="discount" class="form-control" placeholder="Enter promo code">
                <button type="submit" class="btn btn-primary">Apply</button>
            </div>
        </div>
        <div class="total-cost-container mt-3">
            <div class="d-flex justify-content-between">
                <p class="fw-bold">Subtotal:</p>
                <p>${{ @subtotal }}</p>
            </div>
            <div class="d-flex justify-content-between">
                <p class="fw-bold">Tax and Fees:</p>
                <p>${{ @tax }}</p>
            </div>
            <hr>
            <div class="d-flex justify-content-between">
                <h5 class="fw-bold">TOTAL:</h5>
                <h5 class="fw-bold">${{ @total }}</h5>
            </div>
        </div>
        <div class="check-out-button mt-3">
            <button type="submit" class="btn btn-success">CHECKOUT</button>
            <p class="mt-2">Your data and information is protected by very real and secure methods such as making the page elements not visible</p>
        </div>
    </div>
</div>
</div>

</body>
</html>